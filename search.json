[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Under construction",
    "section": "",
    "text": "EnglishPortuguês\n\n\nHey there! I am Artur Quirino; I do research and data analysis.\nIn academia, I am interested in an interconnected set of topics, especially political parties, elections, accountability, regime change, methodology and programming. Currently, I am now researching accountability and learning Bayesian statistics as also machine learning. Before, I’ve been researching democratic backsliding in my masters thesis.\nRegarding data analysis, I like to automate processes and usually create functions in R. When I write several functions on the same topic, I make an effort to put them together in a R package, but this is not always the case. One of my 2023 challenges is to do the same thing using Python.\nIn my spare time, I like to exercise daily. Sometimes I play games with my family, sometimes I do Jigsaw Puzzles as well.\n\nEducation\nFederal University of Minas Gerais| Belo Horizonte, Brazil\nMasters in Political Science | 2022\nFederal University of Minas Gerais| Belo Horizonte, Brazil\nB.A in Social Science | 2018\n\n\n\nOi! Me chamo Artur Quirino; sou pesquisador e Cientista de Dados.\nNa academia, me interesso por um conjunto interconectado de tópicos, especialmente partidos políticos, eleiçoes, accountability, mudanças de regime, metodologia e programação. Atualmente, eu estou pesquisando accountability e aprendendo estatística bayesiana e machine learning. Até pouco tempo atrás, eu estive pesquisando retrocesso democrático em minha dissertação de mestrado.\nEm relação a análise de dados, gosto de automatizar processos e costumo criar funções em R. Quando eu escrevo um monte de funções sobre o mesmo tópico, eu me esforço para colocá-las em um pacote estatístico, mas não é sempre o caso. Um de meus desafios para 2023 é também criar pacotes estatísticos usando Python.\nNo meu tempo livre, gosto de me exercitar, diariamente. Às vezes, jogo video games e jogos de tabuleiro com minha família, às vezes, monto quebra-cabeças.\n\nEducação\nUniversidade Federal de Minas Gerais| Belo Horizonte, Brasil\nMestre em Ciência Política | 2022\nUniversidade Federal de Minas Gerais| Belo Horizonte, Brasil\nBacharel em Ciências Sociais | 2018"
  },
  {
    "objectID": "data.html",
    "href": "data.html",
    "title": "Datasets list",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/R/R.html",
    "href": "posts/R/R.html",
    "title": "R",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/benchmarking/benchmarking.html",
    "href": "posts/benchmarking/benchmarking.html",
    "title": "Tools for data analysis: benchmarking",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/accountability/accountability.html",
    "href": "posts/accountability/accountability.html",
    "title": "Accountability",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/python/python.html",
    "href": "posts/python/python.html",
    "title": "Python",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/programming/programming.html",
    "href": "posts/programming/programming.html",
    "title": "Programming",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html",
    "href": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html",
    "title": "Download de dados eleitorais para análises longitudinais usando R",
    "section": "",
    "text": "O Tribunal Superior Eleitoral (TSE) disponibiliza para download um vasto conjunto de microdados eleitorais em seu Portal de Dados Abertos. Nesta breve postagem, eu crio uma função exemplo para gerar as urls que armazenam as tabelas contidas no portal. A função é útil em análises longitudinais.\nNote que a função monta as urls para tabelas de eleitorado, de detalhes da votação por seção eleitoral e de votação nominal por município e zona. Para montar outras urls, como as dos boletins de urna, make_urls terá que ser ajustada para lidar com o padrão das urls dos boletins, que é distinto. Outras urls, como as de votação nominal por seção eleitoral, seguem o mesmo padrão e podem ser substituidas ou incorporadas ao código abaixo."
  },
  {
    "objectID": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html#monta-as-urls",
    "href": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html#monta-as-urls",
    "title": "Download de dados eleitorais para análises longitudinais usando R",
    "section": "Monta as urls",
    "text": "Monta as urls\n\n## Função para gerar os links\nmake_urls = function(x) {\n  urls = lapply(x, function(x) {\n    y = list(\n      eleitorado = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_\", x, \".zip\"),\n      votacao_detalhes = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_\", x, \".zip\"),\n      votacao_nominal_zona = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_\", x, \".zip\")\n      ## para o download de outras tabelas, repita a estrutura acima. \n      ## \"rótulo = paste(\"início da url\", ano, \"final da url\")\"\n    )\n    setNames(y, paste0(names(y), x))\n  })\n  unlist(urls, recursive = FALSE)\n} \n\n## Cria os links\nyear = seq(1994, 2022, by = 4)\nurls = make_urls(year)\nurls\n\n$eleitorado1994\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_1994.zip\"\n\n$votacao_detalhes1994\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_1994.zip\"\n\n$votacao_nominal_zona1994\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_1994.zip\"\n\n$eleitorado1998\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_1998.zip\"\n\n$votacao_detalhes1998\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_1998.zip\"\n\n$votacao_nominal_zona1998\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_1998.zip\"\n\n$eleitorado2002\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2002.zip\"\n\n$votacao_detalhes2002\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2002.zip\"\n\n$votacao_nominal_zona2002\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2002.zip\"\n\n$eleitorado2006\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2006.zip\"\n\n$votacao_detalhes2006\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2006.zip\"\n\n$votacao_nominal_zona2006\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2006.zip\"\n\n$eleitorado2010\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2010.zip\"\n\n$votacao_detalhes2010\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2010.zip\"\n\n$votacao_nominal_zona2010\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2010.zip\"\n\n$eleitorado2014\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2014.zip\"\n\n$votacao_detalhes2014\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2014.zip\"\n\n$votacao_nominal_zona2014\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2014.zip\"\n\n$eleitorado2018\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2018.zip\"\n\n$votacao_detalhes2018\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2018.zip\"\n\n$votacao_nominal_zona2018\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2018.zip\"\n\n$eleitorado2022\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2022.zip\"\n\n$votacao_detalhes2022\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2022.zip\"\n\n$votacao_nominal_zona2022\n[1] \"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2022.zip\""
  },
  {
    "objectID": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html#download-das-tabelas",
    "href": "posts/elections/20220206-Download-eleicoes-analises-longitudinais.html#download-das-tabelas",
    "title": "Download de dados eleitorais para análises longitudinais usando R",
    "section": "Download das tabelas",
    "text": "Download das tabelas\n\nremotes::install_github(\"arturhgq/dtools\")\nfiles = dtools::download.files(urls)"
  },
  {
    "objectID": "posts/elections/elections.html",
    "href": "posts/elections/elections.html",
    "title": "Elections",
    "section": "",
    "text": "Order By\n       Default\n         \n          Date - Oldest\n        \n         \n          Date - Newest\n        \n         \n          Title\n        \n         \n          Author\n        \n     \n  \n    \n      \n      \n    \n\n\n\n\n\n\nDate\n\n\nTitle\n\n\nAuthor\n\n\n\n\n\n\nFeb 5, 2023\n\n\nDownload de dados eleitorais para análises longitudinais usando R\n\n\nArtur Quirino\n\n\n\n\nFeb 6, 2023\n\n\nDownload e tratamento de dados das eleições brasileiras usando R\n\n\nArtur Quirino\n\n\n\n\n\n\nNo matching items"
  },
  {
    "objectID": "posts/elections/20230205-Download-tratamento-eleicoes-br.html",
    "href": "posts/elections/20230205-Download-tratamento-eleicoes-br.html",
    "title": "Download e tratamento de dados das eleições brasileiras usando R",
    "section": "",
    "text": "Nesta postagem, eu descrevo uma abordagem para download, leitura e tratamento de dados das eleições brasileiras no R, em poucas linhas de código. A atividade é desenvolvida com dados do perfil do eleitorado, detalhes da votação por seção e votação nominal por zona."
  },
  {
    "objectID": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#download",
    "href": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#download",
    "title": "Download e tratamento de dados das eleições brasileiras usando R",
    "section": "Download",
    "text": "Download\n\nremotes::install_github(\"arturhgq/dtools\")\n\n# Lista de links\nurls = list(\n  eleitorado2022 = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/perfil_eleitorado/perfil_eleitorado_2022.zip\"),\n  votacao_detalhes_secao2022 = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/detalhe_votacao_secao/detalhe_votacao_secao_2022.zip\"),\n  votacao_nominal_zona2022 = paste0(\"https://cdn.tse.jus.br/estatistica/sead/odsele/votacao_candidato_munzona/votacao_candidato_munzona_2022.zip\")\n)\n\n# Download dos arquivos\nfiles = dtools::download.files(urls)"
  },
  {
    "objectID": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#leitura",
    "href": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#leitura",
    "title": "Download e tratamento de dados das eleições brasileiras usando R",
    "section": "Leitura",
    "text": "Leitura\nDe posse do vetor com o caminho absoluto de cada arquivo, o fragmento de código abaixo é suficiente para ler todas as tabelas de uma vez. Na segunda aba, eu ofereço uma alternativa, com o pacote electionsBR.\n\nR baseelectionsBR\n\n\n\n# Não rode o código se o computador tiver até 8gb de RAM.\ndata = mapply(\n  dtools::read_delim_zip, \n  x = files, \n  pattern = c(\".csv$\", \"BRASIL.csv$\", \"BRASIL.csv$\"),\n  SIMPLIFY = FALSE\n)\n\n\n\n\nremotes::install_github(\"silvadenisson/electionsBR\")\n\nyear = 2022\n\nvoter_profile = electionsBR::voter_profile(year)\ndetails_mun_zone_fed = electionsBR::details_mun_zone_fed(year, br_archive = TRUE)\nvote_mun_zone_fed = electionsBR::vote_mun_zone_fed(year, br_archive = TRUE)\n\n\n\n\nEm detalhes, mapply aplica à função read_delim_zip dois parâmetros: x e pattern. Em x, atribui-se o caminho absoluto dos três arquivos de interesse - “eleitorado2022”, “votacao_detalhes_secao2022” e “votacao_nominal_zona2022.” Em pattern, define-se, via regex, o padrão de arquivos que deverá ser descompactado e lido para cada x. Quanto mais detalhado for o padrão definido, menores serão os gastos com tempo e com memória RAM.\nVejamos, por exemplo, o arquivo “votacao_nominal_zona2022”. Internamente, ele contém 29 tabelas em .csv e um documento em .pdf. Portanto, caso fosse atribuido a pattern apenas o valor '.csv$', a função read_delim_zip leria e descompactaria 29 tabelas. O padrão 'BRASIL.csv'$, em contraste, seleciona apenas a tabela de interesse, que contém os dados de votacao nominal, a nível de município e zona eleitoral, dos 26 estados, do Distrito Federal e dos eleitores que votaram no exterior.\n\nAbordagem de leitura de dados para redução de gasto de memória RAM\nCertamente, se você não usa um supercomputador, carregar milhares de linhas de dados na memória do seu computador será sempre um desafio. No exemplo acima, eu consumi 9,14 GB de memória RAM para carregar 16.818.896 linhas de dados distribuídas em 95 colunas.\nUma opção para tornar viável a leitura de grandes volumes de dados sem estourar a memória RAM de sua máquina é carregar uma tabela de cada vez, tratar os dados da tabela carregada e somente então ler o próximo arquivo, reescrevendo o anterior. Em casos extremos, você pode particionar as tabelas ou selecionar colunas antes de carregá-las. Feito dessa forma, você poupará tempo e memória RAM."
  },
  {
    "objectID": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#tratamento-dos-dados",
    "href": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#tratamento-dos-dados",
    "title": "Download e tratamento de dados das eleições brasileiras usando R",
    "section": "Tratamento dos dados",
    "text": "Tratamento dos dados\nNesta seção, eu aplico as sugestões que propus no tópico anterior e faço até três operações em cada uma das tabelas: subset, agrupamento e soma. Para reduzir o consumo de tempo das operações, optei pelo pacote data.table ao em vez do amigável dplyr.\n\n## Lista de parâmetros usados nas operações\nparams = list(\n    by_eleitorado2022 = c(\n    \"SG_UF\", \"CD_MUNICIPIO\", \"NM_MUNICIPIO\", \"DS_GENERO\", \"DS_FAIXA_ETARIA\", \n    \"DS_GRAU_ESCOLARIDADE\", \"ANO_ELEICAO\"\n  ),\n  vars_eleirado2022 = c(\n    \"QT_ELEITORES_PERFIL\", \"QT_ELEITORES_BIOMETRIA\"\n  ),\n  by_detalhes_votacao2022 = c(\n    \"DS_CARGO\", \"NR_TURNO\", \"SG_UF\", \"SG_UE\", \"NM_MUNICIPIO\", \"CD_MUNICIPIO\",\n    \"ANO_ELEICAO\"\n  ),\n  vars_detalhes_votacao2022 = c(\n    \"QT_APTOS\", \"QT_COMPARECIMENTO\",\"QT_ABSTENCOES\", \"QT_VOTOS_BRANCOS\",\n    \"QT_VOTOS_NULOS\", \"QT_VOTOS_NOMINAIS\", \"QT_VOTOS_LEGENDA\"\n  ),\n    by_votacao2022 = c(\n    \"NR_TURNO\", \"SG_UF\", \"NM_MUNICIPIO\", \"CD_MUNICIPIO\", \"NR_CANDIDATO\",\n    \"NM_CANDIDATO\", \"NR_PARTIDO\", \"SG_PARTIDO\", \"NM_PARTIDO\", \"ANO_ELEICAO\"\n  ),\n  vars_votacao2022 = c(\n    \"QT_VOTOS_NOMINAIS\"\n  )\n)\n\n\nPerfil do eleitorado brasileiro (2022)\n\n## Define as variáveis que serão carregadas\nselect = c(params$by_eleitorado2022, params$vars_eleirado2022)\n\n## Leitura dos dados\ndata = dtools::read_delim_zip(\n  files$eleitorado2022,\n  pattern = \".csv\",\n  col_select = select\n)\n\n## Tratamento dos dados\neleitorado_mun2022 = data.table::setDT(data)[\n    , # seleciona todas as linhas\n    lapply(.SD, sum), # soma todas as colunas contidas em .SD\n    by = eval(params$by_eleitorado2022), # define o agrupamento\n    .SDcols = params$vars_eleirado2022 # define quais colunas de .SD\n  ] \n\n\n\nDetalhes da votação por município e zona eleitoral (2022)\n\n## Define as variáveis que serão carregadas\nselect = c(\n  params$by_detalhes_votacao2022, \n  params$vars_detalhes_votacao2022, \n  \"DS_CARGO\"\n)\n\n## Leitura dos dados\ndata = dtools::read_delim_zip(\n  files$votacao_detalhes_secao2022,\n  pattern = \"BRASIL.csv\",\n  col_select = select\n)\n\n## Tratamento dos dados\nvotacao_mun_detalhes2022 = data.table::setDT(data)[\n    DS_CARGO == \"PRESIDENTE\",\n    lapply(.SD, sum), \n    by = eval(params$by_detalhes_votacao2022),\n    .SDcols = params$vars_votacao2022\n  ] \n\n\n\nVotação nominal por município e zona eleitoral\n\n## Define as variáveis que serão carregadas\nselect = c(\n  params$by_votacao2022,\n  params$vars_votacao2022, \n  \"DS_CARGO\"\n)\n\n## Leitura dos dados\ndata = dtools::read_delim_zip(\n  files$votacao_nominal_zona2022,\n  pattern = \"BRASIL.csv\",\n  col_select = select\n)\n\n## Tratamento dos dados\nvotacao_mun2022 = data.table::setDT(data)[\n    DS_CARGO == \"Presidente\",\n    lapply(.SD, sum), \n    by = eval(params$by_votacao2022),\n    .SDcols = params$vars_votacao2022\n  ] \n\n\n\nLimpeza do ambiente global e memória\nComo resultado da abordagem proposta, o total de memória gasta diminuiu de 9,14 GB para 1,29 GB. Para reduzir ainda mais o consumo de memória, basta excluir a última tabela carregada no ambiente global e resetar a sessão do R. Este processo gerou uma nova redução no consumo de memória de 932 mb.\n\nrm(data) # exclui a base original\n.rs.restartR() # reinicia a sessão do R, mas mantém os objetos salvos no \"Global Environment\""
  },
  {
    "objectID": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#exportando-os-resultados",
    "href": "posts/elections/20230205-Download-tratamento-eleicoes-br.html#exportando-os-resultados",
    "title": "Download e tratamento de dados das eleições brasileiras usando R",
    "section": "Exportando os resultados",
    "text": "Exportando os resultados\n\n## Lista com as tabelas tratadas\ndata = list(\n  eleitorado_mun2022, \n  votacao_mun_detalhes2022, \n  votacao_mun2022\n)\n\n## Nome dos arquivos que serão exportados\nnames = c(\n  \"eleitorado_mun2022.csv\", \n  \"mun_votacao_detalhes_secao2022.csv\",\n  \"mun_votacao2022.csv\"\n)\n\ninvisible(\n  mapply(\n    vroom::vroom_write, \n    x = data, \n    file = here::here(names)\n  )\n)"
  },
  {
    "objectID": "posts/parties/parties.html",
    "href": "posts/parties/parties.html",
    "title": "Political Parties",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/stats/stats.html",
    "href": "posts/stats/stats.html",
    "title": "Learning statistics",
    "section": "",
    "text": "No matching items"
  },
  {
    "objectID": "posts/regimes/regimes.html",
    "href": "posts/regimes/regimes.html",
    "title": "Regimes",
    "section": "",
    "text": "No matching items"
  }
]